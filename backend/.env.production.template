# =============================================================================
# SkyBuild Pro - Production Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your production values
# SECURITY: Never commit .env file to version control!
# =============================================================================

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENV=production

# =============================================================================
# SECURITY (REQUIRED)
# =============================================================================
# CRITICAL: Generate a secure random secret key (64+ characters recommended)
# Example: openssl rand -hex 32
SECRET_KEY=CHANGE_ME_TO_SECURE_RANDOM_STRING_MIN_64_CHARS

# JWT token expiry in minutes (default: 24 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# DATABASE (REQUIRED)
# =============================================================================
# For production, use PostgreSQL
DB_URL=postgresql://skybuild_user:STRONG_PASSWORD@localhost:5432/skybuild_prod

# For SQLite (not recommended for production)
# DB_URL=sqlite:///./skybuild.db

# =============================================================================
# EMAIL - SMTP Configuration (REQUIRED)
# =============================================================================
# Using SendGrid SMTP
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=SkyBuild Pro

# =============================================================================
# FRONTEND URLS (REQUIRED)
# =============================================================================
# Your production frontend URL
FRONTEND_URL=https://app.yourdomain.com
USER_APP_ORIGIN=https://app.yourdomain.com
ADMIN_APP_ORIGIN=https://admin.yourdomain.com

# =============================================================================
# FILE STORAGE (REQUIRED)
# =============================================================================
STORAGE_DIR=/opt/skybuild/storage
BACKUP_DIR=/opt/skybuild/backups

# Maximum upload file size in MB (enforced by Nginx too)
MAX_UPLOAD_MB=50

# =============================================================================
# CREDITS & BILLING
# =============================================================================
# Cost in credits per job processing
COST_PER_JOB=200

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_V1_PREFIX=/api/v1

# =============================================================================
# CORS (Automatically includes USER_APP_ORIGIN and ADMIN_APP_ORIGIN)
# =============================================================================
# Additional CORS origins if needed (comma-separated)
# BACKEND_CORS_ORIGINS=https://example.com,https://www.example.com

# =============================================================================
# UPLOAD POLICY
# =============================================================================
# Allowed file types for upload
# ALLOWED_UPLOAD_TYPES=["IFC","DWG","DXF","PDF"]

# Presigned URL TTL in seconds (default: 15 minutes)
PRESIGN_DEFAULT_TTL_SECONDS=900
PRESIGN_CLOCK_SKEW_SECONDS=30

# =============================================================================
# BOQ ENGINE
# =============================================================================
# Mapping configuration file
MAPPING_FILE=/opt/skybuild/storage/config/mapping.yml

# Enable PDF plan extraction engine
ENABLE_PDF_PLAN_ENGINE=true

# OCR languages for PDF processing
OCR_LANGS=eng

# =============================================================================
# CURRENCY & REGION
# =============================================================================
DEFAULT_CURRENCY=USD
DEFAULT_REGION=US

# =============================================================================
# RATE LIMITING (Application Level)
# =============================================================================
# Requests per minute (per IP)
RATE_LIMIT_REQUESTS_PER_MIN=100

# Trust X-Forwarded-For header from Nginx
TRUST_X_FORWARDED_FOR=true

# =============================================================================
# NOTES
# =============================================================================
# 1. After creating .env, set proper permissions: chmod 600 .env
# 2. Never expose SECRET_KEY, SMTP_PASSWORD, or DB credentials
# 3. Use strong passwords for database and email
# 4. Enable TLS/SSL for production (configured in Nginx)
# 5. Regular backups of database and storage directory
# =============================================================================
